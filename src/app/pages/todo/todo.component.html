<div class="todo-container">
  <h2>Todo List</h2>

  <form [formGroup]="todoForm" (ngSubmit)="onSubmit()" class="todo-form">
    <div class="form-group">
      <input
        type="text"
        formControlName="title"
        placeholder="Enter todo title..."
        class="todo-input"
        [class.error]="todoForm.get('title')?.invalid && todoForm.get('title')?.touched"
      />
      <div *ngIf="todoForm.get('title')?.invalid && todoForm.get('title')?.touched" class="error-message">
        Title is required and must be at least 3 characters.
      </div>
    </div>

    <div class="form-group">
      <label>
        <input type="checkbox" formControlName="completed" /> Completed
      </label>
    </div>

    <button type="submit" [disabled]="todoForm.invalid || loading" class="submit-btn">
      {{ editingTodo ? 'Update Todo' : 'Add Todo' }}
    </button>

    <button *ngIf="editingTodo" type="button" (click)="resetForm()" class="cancel-btn">Cancel</button>
  </form>

  <div *ngIf="loading" class="loading">Loading...</div>

  <ul class="todo-list" *ngIf="!loading">
    <li *ngFor="let todo of paginatedTodos" class="todo-item">
      <div class="todo-content">
        <input
          type="checkbox"
          [checked]="todo.completed"
          (change)="toggleCompleted(todo)"
          class="todo-checkbox"
        />
        <span [class.completed]="todo.completed">{{ todo.title }}</span>
      </div>
      <div class="todo-actions">
        <button (click)="editTodo(todo)" class="edit-btn">Edit</button>
        <button (click)="deleteTodo(todo.id)" class="delete-btn">Delete</button>
      </div>
    </li>
  </ul>

  <div *ngIf="todos.length === 0 && !loading" class="no-todos">
    No todos found. Add one above!
  </div>

  <div class="pagination" *ngIf="todos.length > 0 && !loading">
    <button 
      (click)="previousPage()" 
      [disabled]="currentPage === 1" 
      class="pagination-btn prev-btn"
    >
      Previous
    </button>
    
    <span class="page-info">
      Page {{ currentPage }} of {{ totalPages }}
    </span>
    
    <button 
      (click)="nextPage()" 
      [disabled]="currentPage === totalPages" 
      class="pagination-btn next-btn"
    >
      Next
    </button>
  </div>
</div>